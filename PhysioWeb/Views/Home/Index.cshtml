@using System.IO
@model PhysioWeb.Models.HomeDashboard

@{
	ViewData["Title"] = "Home Page";
}
@* <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" /> *@
<style>
	body {
		font-family: 'Inter', sans-serif;
		background-color: #f8f9f9;
		color: #1e3a3a;
	}

	.btn-green {
		background-color: #2e7d66;
		color: white;
	}

		.btn-green:hover {
			background-color: #256d5a;
		}


	.icon-box {
		background: #f0f5f4;
		border-radius: 12px;
		padding: 20px;
		text-align: center;
		height: 100%;
	}

		.icon-box i {
			font-size: 2rem;
			color: #2e7d66;
			margin-bottom: 10px;
		}

	.property-card {
		background: #ffffff;
		border-radius: 12px;
		padding: 20px;
		box-shadow: 0 0 15px rgba(0,0,0,0.05);
	}

	.property-image {
		border-radius: 8px;
		overflow: hidden;
	}

		.property-image img {
			width: 100%;
			height: auto;
		}

	.property-price {
		font-size: 1.5rem;
		font-weight: 600;
		color: #2e7d66;
	}

	.choices__inner {
		border-color: #14532d;
	}

	.choices__list--multiple .choices__item {
		background-color: #2e7d66;
		border: 1px solid #2e7d66;
		color: #fff;
		border-radius: 20px;
		padding: 3px 10px;
		font-size: 14px;
	}

	.choices__list--dropdown .choices__item--selectable.is-highlighted {
		background-color: #d4edda; /* light green on hover */
		color: #2e7d66;
	}

	#featured-properties .card:hover {
		transform: translateY(-5px);
		transition: 0.3s ease;
	}

	:root {
		--primary: #4a6fa5;
		--secondary: #ff7e5f;
		--dark: #333;
		--light: #f8f9fa;
	}

	.property-card {
		border-radius: 12px;
		overflow: hidden;
		box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		transition: transform 0.2s, box-shadow 0.2s;
		background: white;
		height: 100%;
		margin: 0 10px;
	}

		.property-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 8px 16px rgba(0,0,0,0.15);
		}

	.card-image {
		position: relative;
		height: 200px;
		background-size: cover;
		background-position: center;
	}

	.status-badge {
		position: absolute;
		top: 1rem;
		left: 1rem;
		background-color: var(--secondary);
		color: white;
		padding: 0.25rem 0.75rem;
		border-radius: 20px;
		font-size: 0.75rem;
		font-weight: bold;
	}

	.favorite-btn {
		position: absolute;
		top: 1rem;
		right: 1rem;
		background: rgba(255, 255, 255, 0.8);
		border: none;
		width: 32px;
		height: 32px;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		color: #ccc;
		font-size: 1rem;
		transition: all 0.2s;
	}

		.favorite-btn:hover, .favorite-btn.active {
			color: var(--secondary);
			background: white;
		}

	.photo-count {
		position: absolute;
		bottom: 1rem;
		right: 1rem;
		background: rgba(0, 0, 0, 0.6);
		color: white;
		padding: 0.25rem 0.75rem;
		border-radius: 20px;
		font-size: 0.75rem;
	}

	.price {
		font-size: 1.5rem;
		color: var(--primary);
		font-weight: 700;
	}

	.address {
		color: var(--dark);
		line-height: 1.4;
	}

	.highlights {
		color: #666;
		font-size: 0.9rem;
	}

	.detail-item {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 0.9rem;
	}

		.detail-item i {
			color: var(--primary);
			font-size: 1.1rem;
		}

	.listed-date {
		font-size: 0.75rem;
		color: #999;
	}

	/* Custom carousel controls */
	.carousel-control-prev, .carousel-control-next {
		width: 5%;
		background: rgba(0,0,0,0.2);
		border-radius: 50%;
		height: 50px;
		top: 50%;
		transform: translateY(-50%);
		opacity: 1;
		margin: 0 15px;
	}

		.carousel-control-prev:hover, .carousel-control-next:hover {
			background: rgba(0,0,0,0.4);
		}

	.top-controls .btn {
		width: 36px;
		height: 36px;
		padding: 0;
		display: inline-flex;
		align-items: center;
		justify-content: center;
	}
	/* Responsive adjustments */
	@@media (max-width: 768px) {
		.property-card {
			margin: 0 5px;
		}

		.carousel-control-prev, .carousel-control-next {
			display: none;
		}
	}

	select[multiple] {
		min-height: 120px;
	}

	/* Ensure horizontal scrolling on all screens */
	.carousel-inner {
		overflow-x: auto;
		white-space: nowrap;
	}

	.carousel-item .row {
		display: flex;
		flex-wrap: nowrap;
	}

	.carousel-item .col-10 {
		display: inline-block;
		float: none;
		white-space: normal;
	}

	/* Hide scrollbar */
	.carousel-inner::-webkit-scrollbar {
		display: none;
	}

	/* Card styling */
	.card {
		min-width: 250px;
		transition: transform 0.3s;
	}

		.card:hover {
			transform: translateY(-5px);
		}

	/* Responsive adjustments */
	@@media (min-width: 576px) {
		.carousel-inner {
			overflow-x: hidden;
		}
	}

</style>



<div class="container">
	<!-- Hero Section -->
	<section class="py-5 text-center">
		<div class="container">
			<h1 class="fw-bold mb-3">Find Your Dream Home</h1>
			<p class="mb-4 text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
			<a href="/PropertyDetails/Property" class="btn btn-green btn-lg px-4">Get Started</a>
		</div>
	</section>


	<!-- ✅ Search Form Section -->
	<section class="py-5 bg-light">
		<div class="container">
			<h3 class="text-center mb-4 fw-bold text-success">Find Your Dream Property</h3>
			<form class="row g-3">

				<!-- Location -->
				<div class="col-md-3">
					<label for="location" class="form-label fw-bold">Location</label>
					<input type="text" id="location" class="form-control" placeholder="Enter Location">
				</div>

				<!-- Property Type -->
				<div class="col-md-3">
					<label class="form-label fw-bold">Property Type</label>
					<select multiple class="form-select select2" id="propertyType" name="PropertyType">
						<option></option>
						@foreach (var item in Model.PropertyTypeList)
						{
							<option value="@item.Value">@item.Text</option>
						}
					</select>
				</div>

				<!-- Bedrooms -->
				<div class="col-md-3">
					<label class="form-label fw-bold">Bedrooms</label>
					<select multiple class="form-select select2" id="bedrooms" name="Bedrooms">
						<option></option>
						@foreach (var item in Model.BedroomList)
						{
							<option value="@item.Value">@item.Text</option>
						}
					</select>
				</div>

				<!-- Rental Type -->
				<div class="col-md-3">
					<label class="form-label fw-bold">Rental Type</label>
					<select multiple class="form-select select2" id="RentalType" name="RentalType">
						<option></option>
						@foreach (var item in Model.RentalTypeList)
						{
							<option value="@item.Value">@item.Text</option>
						}
					</select>
				</div>

				<!-- Property Category -->
				<div class="col-md-3">
					<label class="form-label fw-bold">Property Category</label>
					<select multiple class="form-select select2" id="PropertyCategory" name="PropertyCategory">
						<option></option>
						@foreach (var item in Model.PropertyCategoryList)
						{
							<option value="@item.Value">@item.Text</option>
						}
					</select>
				</div>

				<!-- Amenities -->
				<div class="col-md-6">
					<label class="form-label fw-bold">Amenities</label>
					<select multiple class="form-select select2" name="Amenities" id="Amenities">
						<option></option>
						@foreach (var item in Model.AmenityList)
						{
							<option value="@item.Value">@item.Text</option>
						}
					</select>
				</div>

				<!-- Budget -->
				<div class="col-md-3">
					<label class="form-label fw-bold">Budget</label>
					<div class="row g-1">
						<div class="col-6">
							<div class="input-group">
								<span class="input-group-text">₹</span>
								<input type="number" class="form-control" placeholder="Min">
							</div>
						</div>
						<div class="col-6">
							<div class="input-group">
								<span class="input-group-text">₹</span>
								<input type="number" class="form-control" placeholder="Max">
							</div>
						</div>
					</div>
				</div>

				<!-- Submit Button -->
				<div class="col-md-3 mx-auto text-center mt-3">
					<button type="submit" class="btn btn-success w-100">
						<i class="bi bi-search"></i> Search
					</button>
				</div>
			</form>
		</div>
	</section>

</div>

<div class="container-fluid">
	<div id="propertyCarousel" class="carousel slide" data-bs-ride="carousel">
		<!-- Custom controls -->
		<div class="d-flex justify-content-end mb-3">
			<button class="btn btn-sm btn-outline-dark me-2" data-bs-target="#propertyCarousel" data-bs-slide="prev">
				<i class="fas fa-chevron-left"></i>
			</button>
			<button class="btn btn-sm btn-outline-dark" data-bs-target="#propertyCarousel" data-bs-slide="next">
				<i class="fas fa-chevron-right"></i>
			</button>
		</div>

		<div class="carousel-inner">
			@{
				int itemsPerSlide = 4; // Number of cards to show per slide
				int totalItems = Model.PropertyDetails.Count;
				int totalSlides = (int)Math.Ceiling((double)totalItems / itemsPerSlide);
				int propertyIndex = 0;
			}

			@for (int slide = 0; slide < totalSlides; slide++)
			{
				<div class="carousel-item @(slide == 0 ? "active" : "")">
					<div class="row flex-nowrap g-3">
						@for (int j = 0; j < itemsPerSlide && propertyIndex < totalItems; j++, propertyIndex++)
						{
							var prop = Model.PropertyDetails[propertyIndex];
							<div class="col-10 col-sm-8 col-md-6 col-lg-4 col-xl-3">
								<div class="card h-100 border-0 shadow-sm">
									<img src="/secure-images/@prop.PropertyImg" class="card-img-top" alt="@prop.PropertyName">
									<div class="card-body">
										@* <span class="badge @(prop.Status == "Sale" ? "bg-success" : "bg-primary") mb-2">
											@(prop.Status == "Sale" ? "For Sale" : "For Rent")
										</span> *@
										<h5 class="card-title">@prop.PropertyName</h5>
										<p class="text-muted"><i class="fas fa-map-marker-alt"></i> @prop.Address</p>
										<div class="d-flex justify-content-between text-muted mb-3">
											<span><i class="fas fa-bed"></i> @prop.BedRooms Beds</span>
											<span><i class="fas fa-bath"></i> @prop.BathRooms Baths</span>
											<span><i class="fas fa-ruler-combined"></i> @prop.Sqrtft sqft</span>
										</div>
										<h4 class="text-primary">₹@prop.Price</h4>
									</div>
									<div class="card-footer bg-white border-0">
										<a href="/PropertyDetails/Property?PropertyId=@prop.PropertyId"
										   class="btn btn-primary w-100">View Details</a>
									</div>
								</div>
							</div>
						}
					</div>
				</div>
			}
		</div>
	</div>

</div>


<div class="container">
	<section class="py-5 bg-light" id="why-us">
		<div class="container text-center">
			<h2 class="mb-4 text-success">Why Choose Us</h2>
			<p class="mb-5 text-muted">We provide the best experience when it comes to buying, selling, or renting properties.</p>

			<div class="row g-4">
				<!-- Card 1 -->
				<div class="col-md-6 col-lg-3">
					<div class="card h-100 border-0 shadow-sm p-4 hover-border-green">
						<div class="mb-3">
							<i class="bi bi-check-circle-fill fs-1 text-success"></i>
						</div>
						<h5>Verified Listings</h5>
						<p class="text-muted small">Every property is manually verified for safety and authenticity.</p>
					</div>
				</div>

				<!-- Card 2 -->
				<div class="col-md-6 col-lg-3">
					<div class="card h-100 border-0 shadow-sm p-4 hover-border-green">
						<div class="mb-3">
							<i class="bi bi-lightning-charge-fill fs-1 text-success"></i>
						</div>
						<h5>Quick Process</h5>
						<p class="text-muted small">Fast property discovery, inquiry, and closing support.</p>
					</div>
				</div>

				<!-- Card 3 -->
				<div class="col-md-6 col-lg-3">
					<div class="card h-100 border-0 shadow-sm p-4 hover-border-green">
						<div class="mb-3">
							<i class="bi bi-people-fill fs-1 text-success"></i>
						</div>
						<h5>Local Experts</h5>
						<p class="text-muted small">Work with area specialists who know the neighborhood.</p>
					</div>
				</div>

				<!-- Card 4 -->
				<div class="col-md-6 col-lg-3">
					<div class="card h-100 border-0 shadow-sm p-4 hover-border-green">
						<div class="mb-3">
							<i class="bi bi-chat-dots-fill fs-1 text-success"></i>
						</div>
						<h5>24/7 Support</h5>
						<p class="text-muted small">Our support team is ready to assist you any time.</p>
					</div>
				</div>
			</div>
		</div>
	</section>

</div>


@section Scripts {
	<script>



		new Choices('#propertyType', {
		  removeItemButton: true,
		  duplicateItemsAllowed: false
		});

		new Choices('#bedrooms', { removeItemButton: true ,duplicateItemsAllowed: false});
		new Choices('#Amenities', { removeItemButton: true,duplicateItemsAllowed: false });
		new Choices('#PropertyCategory', { removeItemButton: true ,duplicateItemsAllowed: false});
		new Choices('#RentalType', { removeItemButton: true ,duplicateItemsAllowed: false});

				 $("#location").autocomplete({
			source: function (request, response) {
				$.ajax({
					url: '/Master/GetAreas',
					type: 'GET',
					data: { searchTerm: request.term },
					success: function (data) {
						response(data); // expects list of strings
					},
					error: function () {
						response([]);
					}
				});
			},
			minLength: 1
		});

			 document.addEventListener('DOMContentLoaded', function() {
			const carousel = new bootstrap.Carousel(document.getElementById('propertyCarousel'), {
				interval: false,
				wrap: false
			});

			// Enable touch swiping
			const carouselInner = document.querySelector('.carousel-inner');
			let touchStartX = 0;
			let touchEndX = 0;

			carouselInner.addEventListener('touchstart', e => {
				touchStartX = e.changedTouches[0].screenX;
			}, {passive: true});

			carouselInner.addEventListener('touchend', e => {
				touchEndX = e.changedTouches[0].screenX;
				handleSwipe();
			}, {passive: true});

			function handleSwipe() {
				if (touchEndX < touchStartX - 50) {
					carousel.next();
				}
				if (touchEndX > touchStartX + 50) {
					carousel.prev();
				}
			}
		});


	</script>
}