@{
	ViewBag.Title = "Login";
	Layout = "_MinimalLayout";
}
<style>
	/* Make card slightly rounded & add hover effect */
	.card {
		border-radius: 12px;
		transition: transform 0.3s ease;
	}

		.card:hover {
			transform: translateY(-3px);
		}

	/* Mobile adjustments */
	@@media (max-width: 768px) {
		.bg-success {
			display: none !important;
		}
	}
</style>

<div class="d-flex min-vh-100">

	<!-- Left: Background Image -->
	<div class="d-none d-md-flex flex-column justify-content-center align-items-center bg-success text-white p-5" style="flex:1; background:url('/images/realestate-bg.jpg') center/cover no-repeat;">
		<h1 class="fw-bold">Find My Roof</h1>
		<p class="lead">Your dream home is just a click away.</p>
	</div>

	<!-- Right: Login Form -->
	<div class="d-flex flex-column justify-content-center align-items-center bg-light p-4" style="flex:1;">
		<div class="card shadow-sm p-4 w-100" style="max-width:400px;">
			<h3 class="text-center mb-4 text-success">Sign In</h3>

			<form id="loginForm">
				<!-- Email -->
				<div class="form-floating mb-3">
					<input type="email" class="form-control" id="floatingEmail" placeholder="name@example.com">
					<label for="floatingEmail">Email address</label>
				</div>

				<!-- Mobile -->
				<div class="form-floating mb-3">
					<input type="tel" class="form-control" id="floatingMobile" placeholder="9876543210" pattern="[0-9]{10}">
					<label for="floatingMobile">Mobile Number</label>
				</div>

				<!-- Password -->
				<div class="form-floating mb-3">
					<input type="password" class="form-control" id="floatingPassword" placeholder="Password">
					<label for="floatingPassword">Password</label>
				</div>

				<!-- Remember / Forgot -->
				<div class="d-flex justify-content-between align-items-center mb-3">
					<div class="form-check">
						<input class="form-check-input" type="checkbox" id="remember">
						<label class="form-check-label small" for="remember">Remember me</label>
					</div>
					<a href="#" class="small text-success">Forgot password?</a>
				</div>

				<!-- Button -->
				<button type="button" class="btn btn-success w-100 " id="login">Login</button>
			</form>

			<p class="text-center small mt-3">
				Don't have an account? <a href="/Home/Register" class="text-success">Register</a>
			</p>
		</div>
	</div>
</div>


@section Scripts {
	<script>
		$("#login").on("click", function (e) {
			let email = $("#floatingEmail").val().trim();
			let mobile = $("#floatingMobile").val().trim();
			let password = $("#floatingPassword").val();

			const mobileRegex = new RegExp("^[6-9][0-9]{9}$");
			const emailRegex = /^[^\s@@]+@@[^\s@@]+\.[^\s@@]+$/;


			if (!emailRegex.test(email)) {
				notyf.error("Enter a valid Email address.");
				return;
			}
			else if (mobile && !mobileRegex.test(mobile)) {
				notyf.error("Enter a valid 10-digit Mobile Number.");
				return;
			}
			else if (password.length < 6) {
				notyf.error("Password must be at least 6 characters.");
				return;
			}
			else{
			
				$.ajax({
					url: "/Home/Login",
					type: "POST",
					data: {Email:email,Mobile: mobile,Password: password},
					success: function (response) {
							showLoader();
						  if (response.success) {
						notyf.success("Login successful! Redirecting...");

						setTimeout(() => window.location.href = response.redirect, 1500);
					} else {
						notyf.error(response.message || "Invalid credentials!");
					}
					},
					error: function () {
						hideLoader();
						notyf.error("An error occurred. Try again.");
					}
				});
				hideLoader();
			}
		});

	</script>

}
